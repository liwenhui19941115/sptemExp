"0","#Set the temporary path to save the models and their performance metrics: "
"0","dPath=tempdir()"
"0","mPath=paste(dPath,""/models"",sep="""")"
"0","unlink(mPath,recursive = TRUE,force=TRUE)"
"0","dir.create(mPath)"
"0","#Load the dataset of Shandong PM2.5 "
"0","data(""trainsample"",""bnd"")"
"0","#The formula where sx(rid, bs = ""mrf"", map =bnd) is spatial random effect.  You can add unstructured item and other items.  See R2BayesX. "
"0","formulaStrs=c(paste('logpm25 ~ sx(rid, bs = ""mrf"", map =bnd)+sx(monthAv,bs=""rw2"")+sx(ndvi,bs=""rw2"") + sx(aod,bs=""rw2"") ','+sx(wnd_avg,bs=""rw2"")',sep=""""))"
"0","trainsample$tid=as.numeric(strftime(trainsample$date, format = ""%j""))"
"0","trainsample$logpm25=log(trainsample$pm25)"
"0","tids=c(91) # the day of year for 2014 "
"0","#Train the model using 2 cores and construct 12 models: "
"0","sptemExp::parSpModel(trainsample,bnd,formulaStrs,tidF=""tid"",tids,c=1,nM=10,"
"0","           mPath,idF=""siteid"",dateF=""date"",obsF=""pm25"")"
"1","[1]"
"1"," ""t:  1"""
"1","
"
"1","[1]"
"1"," ""       model:1 of 10"""
"1","
"
"1","[1]"
"1"," ""       model:2 of 10"""
"1","
"
"1","[1]"
"1"," ""       model:3 of 10"""
"1","
"
"1","[1]"
"1"," ""       model:4 of 10"""
"1","
"
"1","[1]"
"1"," ""       model:5 of 10"""
"1","
"
"1","[1]"
"1"," ""       model:6 of 10"""
"1","
"
"1","[1]"
"1"," ""       model:7 of 10"""
"1","
"
"1","[1]"
"1"," ""       model:8 of 10"""
"1","
"
"1","[1]"
"1"," ""       model:9 of 10"""
"1","
"
"1","[1]"
"1"," ""       model:10 of 10"""
"1","
"
"1","      "
"1","    used"
"1","  (Mb)"
"1"," gc trigger"
"1","  (Mb)"
"1"," max used"
"1","  (Mb)"
"1","
Ncells"
"1"," 2604469"
"1"," 139.1"
"1","    3886542"
"1"," 207.6"
"1","  3886542"
"1"," 207.6"
"1","
Vcells"
"1"," 9492277"
"1","  72.5"
"1","   26172734"
"1"," 199.7"
"1"," 26172718"
"1"," 199.7"
"1","
"
